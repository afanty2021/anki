
# 文本管理

<cite>
**本文档中引用的文件**  
- [actions.ftl](file://ftl/core/actions.ftl)
- [about.ftl](file://ftl/qt/about.ftl)
- [lib.rs](file://rslib/i18n/src/lib.rs)
- [write_strings.rs](file://rslib/i18n/write_strings.rs)
- [ftl-helpers.ts](file://ts/lib/generated/ftl-helpers.ts)
- [generated.rs](file://rslib/i18n/src/generated.rs)
</cite>

## 目录
1. [简介](#简介)
2. [FTL文件组织结构](#ftl文件组织结构)
3. [Fluent语法特性](#fluent语法特性)
4. [文本解析与加载机制](#文本解析与加载机制)
5. [字符串提取流程](#字符串提取流程)
6. [添加新文本条目](#添加新文本条目)
7. [翻译质量检查最佳实践](#翻译质量检查最佳实践)
8. [结论](#结论)

## 简介
Anki项目采用Fluent（FTL）格式进行国际化文本管理，通过模块化组织和自动化工具链实现多语言支持。该系统将用户界面文本从代码中分离，存储在独立的FTL文件中，并通过Rust和TypeScript的集成机制在运行时加载和渲染。本文档详细说明了FTL文件的组织方式、Fluent语法的应用、文本解析机制以及维护最佳实践。

## FTL文件组织结构

Anki项目的FTL文件存储在`ftl`目录下，采用功能模块化分类方式组织。主要分为`core`和`qt`两个子目录：

- `ftl/core`：存放核心功能模块的文本，如`actions.ftl`、`decks.ftl`、`scheduling.ftl`等，每个文件对应一个功能领域
- `ftl/qt`：存放Qt桌面客户端特有的界面文本，如`about.ftl`、`addons.ftl`、`preferences.ftl`等

这种分类方式实现了文本资源的高内聚低耦合，便于按功能模块进行维护和翻译。每个FTL文件包含一组相关的文本条目，使用简洁的键名标识，如`actions-add`表示"添加"操作。

**Section sources**
- [actions.ftl](file://ftl/core/actions.ftl#L1-L98)
- [about.ftl](file://ftl/qt/about